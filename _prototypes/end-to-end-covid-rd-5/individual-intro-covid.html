---
title: COVID-19 test (round 5 - pandemic situation revised) Household questionnaire (English)
project: Census 2021 End to end prototype
globalcss: false
layout: eq-default-extras
footer: census-transactional
assetPrefixUrl: https://sdc-global-design-patterns.netlify.com
noONSLogoLink: true
---

<link rel="stylesheet" href="../../end-to-end/style.css"/>
<div class="page__subheader">
    <div class="container">
        <a class="back-link" href="../hub">Previous</a>
    </div>
</div>

<div class="page__container container">
    <div class="grid grid--reverse">
        <div class="grid__col col-4@m">
        </div>
        <div class="grid__col col-8@m">
            <main role="main" id="main" class="page__main">
                <div class="group">
                    <div class="block">
                        <section class="section">
                            <h1 class="u-fs-xl">Coronavirus (COVID-19)</h1>
                            <p class="js-piping">Circumstances for <span class="js-person-name"></span> may have changed during the coronavirus pandemic. Answer all questions based on the situation as it is now.</p>
                        </section>
                    </div>
                </div>

                <button class="btn btn--primary btn--lg qa-btn-submit btn-submit u-mt-xl"
                        type="submit" name="">Continue
                </button>
            </main>
        </div>
    </div>
</div>

<script src='/js/compiled/end-to-end-covid/bundle.js'></script>

<script>
    var storageAPI = window.ONS.storage,
        urlParams = new URLSearchParams(window.location.search),
        personId = urlParams.get('person_id'),
        surveyType = urlParams.get('survey');
        personDetails = storageAPI.getHouseholdMemberByPersonId(personId),
        person = personDetails['@person'];
    var pipingDestinations = Array.from(document.querySelectorAll('.js-piping'));

    $('.btn-submit').click(function(e) {
        e.preventDefault();

        if (personDetails.type === 'visitor'){
            var url = 'individual-details-dob/';
        } else {
            var url = 'individual-decision/';
        }
        window.location = '../' + url + '?person_id=' + personId;
        storageAPI.storePageData('/end-to-end-covid-rd-5/' + url, window.location.pathname);
    });

    $('.js-link-ir').click(function(e) {
        e.preventDefault();

        window.location = '../cant-answer-for-others/?person_id=' + personId;
        storageAPI.storePageData('/end-to-end-covid-rd-5/cant-answer-for-others/', window.location.pathname);
    });

  function updateName() {
    $('.js-person-name').html('<strong>' + person.firstLastName + '</strong>');
    
    if(storageAPI.getProxyFor(personId) || isVisitor) {
        pipingDestinations.forEach(function(pipingDestination) {
            pipingDestination.innerHTML = pipingDestination.innerHTML.replace('your', 'their');
        });     
    }

  }

  function showIrDetails() {
    if (personId !== 'person_me' && personDetails.type !== 'visitor') {
        $('.js-collapsible').removeClass('u-vh');
    }
  }
  $(updateName);
  $(showIrDetails);

</script>
