---
title: Census Coverage Survey v10
project: your-household
globalcss: false
layout: eq-default-extras
cdn: v2.0.0
assetPrefixUrl: https://deploy-preview-214--sdc-global-design-patterns.netlify.com
hideSaveLater: true
footer: minimal
---

<link rel="stylesheet" href="../style.css"/>
<div class="page__subheader">
    <div class="container">
        <a class="js-previous-link" href="../visitors">Previous</a>
    </div>
</div>

<div class="page__container container">
    <div class="grid grid--reverse">
        <div class="grid__col col-4@l">
            <!--{% include navigation.html
            items=site.data.your-household-v6.navigationItemsHousehold
            nav-title-id="section-address" %}-->
        </div>
        <div class="grid__col col-7@l pull-1@l">
            <main role="main" id="main" class="page__main">
                <form name="trav" class="form qa-questionnaire-form" role="form"
                      autocomplete="off" novalidate="">
                    <div class="group">
                        <div class="block">
                            <section class="section">
                                <div class="question u-mb-s">
                                    <h1 class="question__title u-fs-l js-heading">
                                        People who live here and overnight
                                        visitors
                                    </h1>
                                </div>

                                <h2
                                        class="u-fs-m js-household-people-list">You&rsquo;ve added <span class="highlight">{n}</span> household member<span class="js-household-people-plural" style="display: none">s</span></h2>
                                <ul id="household-members-summary"
                                    class="list list--records list--people u-mb-s js-records"></ul>
                                <p id="nobody-notice"
                                   style="display:none;">Nobody usually
                                    lives here</p>

                                 <div class="answer__fields js-fields js-add">
                                    <div class="field field--radio field--multiplechoice ">
                                        <fieldset class="u-mb-xl">
                                            <div class="field__item js-focusable-box">
                                                <input class="input input--radio js-focusable"
                                                       type="radio"
                                                       name="does-anyone-else-live-here"
                                                       id="yes-someone-else"
                                                       value="yes">
                                                <label class="label label--inline u-fs-r"
                                                       for="yes-someone-else"
                                                       id="yes-someone-else-label">
                                                    <span
                                                            class="yes-answer">Yes, I need to
                                                        add
                                                    another person</span>
                                                    <span class="label__description u-fs-s">Include partners, children, babies born on or before 11 November 2018, housemates, tenants and lodgers, students and schoolchildren who live away from home during term time, where this is their permanent or family home</span>
                                                </label>
                                            </div>

                                            <div class="field__item js-focusable-box">
                                                <input class="input input--radio js-focusable"
                                                       type="radio"
                                                       name="does-anyone-else-live-here"
                                                       id="no" value="no">
                                                <label
                                                        class="label label--inline u-fs-r"
                                                       for="no">No, I do not need to add anyone</label>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>

                                <div class="js-visitors-people-list u-d-no">
                                    <h2 class="u-fs-m js-visitors-people-title">You&rsquo;ve added <span class="highlight">{n}</span> visitor<span class="js-visitors-people-plural" style="display: none">s</span> staying
                                        overnight on <span class="js-significant-date"></span></h2>
                                    <ul id="visitors-summary"
                                        class="list list--records list--people u-mb-s js-records"></ul>
                                    <p id="nobody-visitor-notice"
                                       style="display:none;">There are no
                                        visitors staying overnight on
                                        <span class="js-significant-date"></span>.</p>
                                    <p class="u-mb-xl"><a
                                            href="../who-else-to-add?journey=visitors&redirect=../summary/">Add a visitor</a>
                                    </p>
                                </div>
                            </section>
                        </div>
                    </div>
                    <button class="btn btn--primary btn--lg qa-btn-submit"
                            type="submit" name="">Continue
                    </button>
                </form>
            </main>
        </div>
    </div>
</div>

<ul style="display:none;">
    <li id="person-record-template" class="list__item">
        <span class="list__item-name js-person-name"></span>
        <div class="list__item-actions u-fr">
            <span class="list__item-action">
                <a class="js-record-edit" href="#">Change or remove</a>
            </span>
        </div>
    </li>
</ul>

<script src='/js/compiled/your-household-interview-led-v10/bundle.js'></script>

<style>
    .list.list--records {
        border-top: 1px solid #ccc;
    }

    .list.list--records .list__item {
        margin-bottom: 0;
        padding: 1rem 0;
        border-bottom: 1px solid #ccc;
    }

    .list.list--people {
        list-style-type: none;
    }

    .list.list--people .list__item {
        background: url(/img/icons/person.svg) 0 1.3rem no-repeat;
    }

    .list.list--people .list__item-name {
        padding-left: 2rem;
    }

    .list.list--people .list__item-actions {
        margin-top: -4px;
    }

    .list.list--people .list__item-action + .list__item-action {
        margin-left: .5rem;
    }
</style>

<script>
  var urlParams = new URLSearchParams(window.location.search),
    surveyType = urlParams.get('survey'),
    nextPage = surveyType
      ? '../hub/?survey=' + surveyType
      : '../hub/',
    altPage = surveyType && surveyType === 'lms' ? surveyType + '/' : '',
    journey = urlParams.get('journey');

 

  function createMemberItem(member) {
    var $nodeEl = $('#person-record-template').clone(),
      personNameText = member['@person'].fullName,
      memberIsUser = isUser(member);

    if (memberIsUser) {
      personNameText += ' (You)';
    }

    $nodeEl.attr('id', '');
    $nodeEl.find('.js-person-name').html(personNameText);

    $nodeEl.find('.js-record-edit').attr('href', (
      memberIsUser
        ? '../' + altPage + 'what-is-your-name/?edit=true'
        : '../' + altPage + 'who-else-to-add/?edit=' + member['@person'].id +
          (member.type === window.ONS.storage.KEYS.VISITOR_TYPE ?
           '&journey=visitors' : '')
    ));

    return $nodeEl;
  }

  function updateHouseholdMembersVisitors() {
    var members = window.ONS.storage.getAllHouseholdMembers(),
      userMember = members.filter(isUser)[0],
      otherHouseholdMembers = members.filter(window.ONS.storage.isOtherHouseholdMember),
      visitors = members.filter(window.ONS.storage.isVisitor),
      householdMembers = otherHouseholdMembers;

    $('#household-members-summary').html('');
    $('#visitors-summary').html('');

    if (userMember) {
      householdMembers = [userMember].concat(otherHouseholdMembers);
    }

    $.each(householdMembers, function(i, member) {
      $('#household-members-summary').append(createMemberItem(member));
    });

    const numberOfHouseholdMembers = householdMembers.length;
    const peopleListTitle = document.querySelector('.js-household-people-list');
    peopleListTitle.innerHTML = peopleListTitle.innerHTML.replace('{n}',
      window.ONS.utils.numberToWordsStyleguide(numberOfHouseholdMembers) || 0);

    if(!numberOfHouseholdMembers) {
      $('#nobody-notice').show();
    }
    
    if (numberOfHouseholdMembers !== 1) {
        document.querySelector('.js-household-people-plural').style.display = 'inline';
    }

    const numberOfVisitors = visitors.length;

    if(!numberOfVisitors) {
      $('#nobody-visitor-notice').show();
    }

    $.each(visitors, function(i, member) {
        $('#visitors-summary').append(createMemberItem(member));
    });

    const visitorsListTitle = document.querySelector('.js-visitors-people-list');

    visitorsListTitle.innerHTML = visitorsListTitle.innerHTML.replace('{n}',
      window.ONS.utils.numberToWordsStyleguide(numberOfVisitors) || 0);

    if (numberOfVisitors > 1) {
      document.querySelector('.js-visitors-people-plural').style.display =
       'inline';
    }

    if (journey === 'visitors') {
      var addRadios = document.querySelector('.js-add');
      addRadios.className = addRadios.className + ' u-d-no';

       if (numberOfVisitors) {
         var peopleList = document.querySelector('.js-visitors-people-list');
         peopleList.className = peopleList.className.replace(' u-d-no', '');
       }
    }
  }

  $('#modal .close-modal-button').on('click', function(e) {
    e.preventDefault();
    $('#modal').hide();
  });

  $('.qa-btn-submit').on('click', function(e) {
    e.preventDefault();

    if (document.getElementById('yes-someone-else').checked) {
      window.location = '../who-else-to-add/';
    } else if (document.getElementById('no').checked) {
      window.location = '../temp-types-living-away/';
    } else if (window.ONS.storage.getAllHouseholdMembers().length > 0) {
      window.location.href = nextPage;
    }
    else {
      alert('Journey for less than one person in household, not yet implemented');
    }
  });

  function isUser(member) {
    return member['@person'].id === window.ONS.storage.IDS.USER_HOUSEHOLD_MEMBER_ID;
  } 

  function updateContent () {
    var $addToHousehould = $('.js-add-to-household');

    if (surveyType === 'lms') {
      $('.js-heading').html('About your household');
      $addToHousehould.attr('href', '../lms/who-else-to-add/');
    }
  }

  $(updateContent);
  $(updateHouseholdMembersVisitors);

  var storageAPI = window.ONS.storage;
  $(function() {
    var addressLines = (sessionStorage.getItem('address') || '').split(','),
      addressLine1 = addressLines[0],
      addressLine2 = addressLines[1],
      members = storageAPI.getAllHouseholdMembers(),
      householdMembers = members.filter(storageAPI.isHouseholdMember),
      visitors = members.filter(storageAPI.isVisitor),
      nextPosition,
      visitorTypesStr =
        new URLSearchParams(window.location.search).get('visitor-types'),
      isVisitorJourney = window.location.search.match(/journey=visitors/);

    if (isVisitorJourney) {
      nextPosition = visitors.length + 1;
      $('#form').prepend("<input type='hidden' name='visitor-types' value='" + visitorTypesStr + "' />");
      $('#form')
        .prepend('<input type="hidden" name="journey" value="visitors" />');
      $('#question-title')
        .html('Are there any other visitors staying overnight on ' +
          window.ONS.utils.getSignificant()
          + ' at ' +
          addressLine1 +
          ', ' + addressLine2 + '?');
      $('#member-list').html('<ul id="visitors-list"></ul>');
      window.ONS.helpers.populateVisitorList();

      if (visitorTypesStr) {
        var visitorTypes = JSON.parse(visitorTypesStr);

        if (visitorTypes.length) {
          document.querySelector('.js-visitor-panel').style.display = 'block';

          var visitorIncludes = document.querySelector('.js-visitor-includes');

          visitorTypes.forEach(type => {
            var li = document.createElement('li');
            li.className = 'list__item';

            li.innerHTML = storageAPI.visitorQuestionSentenceMap[type];

            visitorIncludes.appendChild(li);
          });
        }
      }
    }
    else {
      nextPosition = householdMembers.length + 1;
      $('#member-list').html('<ul id="household-members"></ul>');
      window.ONS.helpers.populateHouseholdList();
    }

    if ((nextPosition) > 1) {
      $('.yes-answer').html(
        'Yes, I need to add a ' +
        window.ONS.utils.numberToPositionWord(nextPosition) +
        ' ' + (isVisitorJourney ? 'visitor' : 'person')
      );
    }
  });
</script>
