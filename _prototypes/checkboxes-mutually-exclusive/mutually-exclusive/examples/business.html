---
title:  Mutually exclusive (Business example)
project: Checkboxes (mutually exclusive)
globalcss: false
---

<link rel="stylesheet" href="{{ '/css/census-header-footer.css' | prepend: site.baseurl }}" />
<style>
    @media only screen and (min-width: 740px) {
        .field__item--half {
            min-width: 9.7rem;
            margin-bottom : 0;
        }
    }
</style>

<header class="page__header">
    {% include bar.html %}
    {% include header-census.html %}
</header>

<div class="page__subheader">
    <div class="container">
        <a class="mars" href="../index">Previous</a>
    </div>
</div>

<div class="page__container container">
    <div class="grid grid--reverse">
        <div class="grid__col col-4@m">
        </div>
        <div class="grid__col col-7@m pull-1@m">
            <main role="main" id="main" class="page__main">
                <form action="../../../thankyou/index.html" class="form qa-questionnaire-form" role="form" autocomplete="off" novalidate="">
                    <div class="group">
                        <div class="block" id="total-retail-turnover">
                            <section class="section" id="total-retail-turnover-section">

                                <div class="question" id="heating-type">
                                    <h1 class="question__title saturn">What type of central heating do you have?</h1>

                                    <div class="question__answers">
                                        <div class="question__answer">
                                            <div class="answer">
                                                <div class="answer__fields js-fields">
                                                    <div class="field field--checkbox field--multiplechoice">
                                                        <label class="label venus">
                                                            <div class="label__inner">Select all that apply:</div>
                                                        </label>

                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="redundancies" name="question-type" type="checkbox" id="checkbox1">
                                                            <label class="label label--inline venus js-label" for="checkbox1">Redundancies</label>
                                                        </div>
                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="more-temporary-staff" name="question-type" type="checkbox" id="checkbox2">
                                                            <label class="label label--inline venus js-label" for="checkbox2">More temporary staff</label>
                                                        </div>
                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="fewer-temporary-staff" name="question-type" type="checkbox" id="checkbox3">
                                                            <label class="label label--inline venus js-label" for="checkbox3">Fewer temporary staff</label>
                                                        </div>
                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="more-overtime" name="question-type" type="checkbox" id="checkbox4">
                                                            <label class="label label--inline venus js-label" for="checkbox4">More overtime</label>
                                                        </div>
                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="less-overtime" name="question-type" type="checkbox" id="checkbox5">
                                                            <label class="label label--inline venus js-label" for="checkbox5">Less overtime</label>
                                                        </div>
                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="pay-increase" name="question-type" type="checkbox" id="checkbox6">
                                                            <label class="label label--inline venus js-label" for="checkbox6">Pay increase</label>
                                                        </div>
                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="industrial-action" name="question-type" type="checkbox" id="checkbox7">
                                                            <label class="label label--inline venus js-label" for="checkbox7">Industrial action</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="question">
                                    <h2 class="question__title neptune">Or</h2>

                                    <div class="question__answers">
                                        <div class="question__answer">
                                            <div class="answer">
                                                <div class="answer__fields js-fields">
                                                    <div class="field field--checkbox field--multiplechoice">
                                                        <!--<label class="label venus">
                                                            <div class="label__inner">Select all that apply:</div>
                                                        </label>-->
                                                        <div class="field__item js-focusable-box">
                                                            <input class="input input--checkbox js-focusable" value="none" name="question-type" type="checkbox" id="checkbox8">
                                                            <label class="label label--inline venus js-label" for="checkbox8">There were no significant changes</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <button class="btn btn--primary btn--lg qa-btn-submit venus" type="submit" name="">Save and continue</button>
                    <div class="u-mb-m">
                        <button class="btn btn--link mars js-btn-save" type="submit" name="action[save_sign_out]">Save and complete later</button>
                    </div>
                </form>
                <a class="page__previous page__previous--bottom js-previous-link" href="../index" id="bottom-previous">Previous</a>
            </main>
        </div>
    </div>
</div>

<script src='/js/compiled/standard-bundle.js'></script>

<script>

    function CheckboxGroup (opts) {
    	opts = opts || {};

        if (!opts.name) {
        	throw Error('Checkbox group name required');
        }

        var nameGroup = opts.name,
            mutullyExclusiveGroupsByValue = opts.mutullyExclusiveGroupsByValue;

        function getSelectedMutullyExclusiveGroupIndexForCheckbox ($checkBox) {
        	var index;

        	$.each(mutullyExclusiveGroupsByValue, function (i, relatedGroup) {
        		var found = relatedGroup.indexOf($checkBox.val());

        		if (found !== -1) {
                    index = i;
                }
            });

        	return index;
        }

        $('input:checkbox[name='+ nameGroup +']').on('change', function (e) {

        	var $otherCheckboxes = $('input:checkbox[name=' + nameGroup + ']:checked').not(this),
                selectedGroupIndex = getSelectedMutullyExclusiveGroupIndexForCheckbox($(this));

        	if (selectedGroupIndex === undefined) {
        		console.log('Checkbox not found in group: ', $(this));
            }
            else {
                $otherCheckboxes.each(function (i, checkboxEl) {
                    var $checkBox = $(checkboxEl),
                        groupIndex = getSelectedMutullyExclusiveGroupIndexForCheckbox($checkBox);

                    if (groupIndex !== selectedGroupIndex) {
                        $checkBox.prop('checked', false);
                        $checkBox.parent().removeClass('is-checked');
                    }
                });
            }
        });
    }

    $(document).ready(function () {

        new CheckboxGroup({
            name: 'question-type',

            /**
             * Define groups for mutually exclusive behaviour
             */
            mutullyExclusiveGroupsByValue: [
                [
                  'redundancies',
                  'more-temporary-staff',
                  'fewer-temporary-staff',
                  'more-overtime',
                  'less-overtime',
                  'pay-increase',
                  'industrial-action'
                ],
                ['none']
            ]
        });
    });
</script>
