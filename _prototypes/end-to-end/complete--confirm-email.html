---
title: Census Household questionnaire (English)
project: Census 2021 End to end prototype
globalcss: false
layout: eq-default-extras
footer: census-transactional
assetPrefixUrl: https://sdc-global-design-patterns.netlify.com
exit: true
---

<style type="text/css">

.page_line {
    margin-top: 0.5em;
      border: 0.02em solid #999;
      width: 100%;
    margin-bottom: 1.6em;
}

.title {
    font-size: 1.5em;
    font-weight: bold;
    margin-bottom: 1em;
}

.person-count {
    font-size: 3em;
    font-weight: bold;
    margin-bottom: -0.2em;
    margin-top: -0.3em;
}

.smalltext {
    font-size: 0.4em;
    font-weight: normal;
    margin-left: -0.2em;
}

.tick-spacing {
    margin-left: 1.3em;
    margin-bottom: 0.8em;
}

</style>
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v5.0"></script>
<link rel="stylesheet" href="../../end-to-end/style.css"/>
<div class="page__subheader">
    <div class="container">
        <a class="back-link js-previous-link" href="../complete/">Back</a>
    </div>
</div>

<div class="page__container container">
    <div class="grid grid--reverse">
        <div class="grid__col col-4@m">
        </div>
        <div class="grid__col col-8@m">
            <main role="main" id="main" class="page__main u-mt-m@m">
                <div class="panel panel--error u-mb-m js-error-box u-d-no">
                    <div class="panel__header">
                        <div class="panel__title u-fs-r--b">There is a problem with your answer</div>
                    </div>
                    <div class="panel__body">
                        <ol class="list list--bare">
                            <li class="list__item js-yes u-d-no">
                                1. <a href="#error-message-yes" class="list__link js-inpagelink">
                                    Select an answer
                                </a>
                            </li>
                       </ol>
                    </div>
                </div>
                <form action="../complete--confirmation-sent/">
                    <div class="group">
                        <section class="section">
                            <div class="question u-mb-s">
                                <h1 id="question-title"
                                    class="question__title u-fs-xl js-piping">
                                    Is this email address correct?
                                </h1>
                                <p class="js-piping">{x}</p>

                                <div class="answer__fields question__answer js-fields" id="radios">
                                    <div class="field field--radio field--multiplechoice">
                                        <fieldset>
                                            <div class="field__item js-focusable-box">
                                                <input autocomplete="new-password" class="input input--radio js-focusable"
                                                    name="radio-answer"
                                                    value="Yes"
                                                    id="yes"
                                                    type="radio"
                                                    data-error-msg="Select an answer">
                                                <label class="label label--inline u-fs-r"
                                                    for="yes">
                                                    Yes, send the confirmation email</label>
                                            </div>
                                            <div class="field__item js-focusable-box">
                                                <input autocomplete="new-password" class="input input--radio js-focusable"
                                                    name="radio-answer"
                                                    value="No"
                                                    id="no"
                                                    type="radio">
                                                <label class="label label--inline u-fs-r "
                                                    for="no">
                                                    No, I need to correct it</label>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                    <button type="submit" class="btn u-mb-l u-mt-s qa-btn-submit u-mt-l">
                        <span class="btn__inner">Continue</span>
                    </button>
                </form>
            </main>
        </div>
    </div>
</div>

<script src='/js/compiled/end-to-end/bundle.js'></script>

<script>
    var queryString = window.location.search;
    var searchParams = new URLSearchParams(queryString);
    var emailAddress = searchParams.get('email');
    var pipingDestinations = Array.from(document.querySelectorAll('.js-piping'));
    var yesbox = document.getElementById("yes");
    var hasErrors = false;
    var previousPage = searchParams.get('previous');
    var currentPage = 'complete--confirm-email';


    $('.qa-btn-submit').on('click', function (e) {
        e.preventDefault();
        const testFails = ($('input[type=radio]:checked').size() === 0);
        window.ONS.utils.validateInputs(testFails, "input[type=radio]");
        if (hasErrors) {
            window.ONS.utils.calcErrors();
            hasErrors = false;
            return false;
        } else {
            var loc;
            if (yesbox.checked) {
                window.location.href = '../complete--confirmation-sent/?email=' + emailAddress;
            } else {
                window.location.href = '../complete--confirmation-resend/?email=' + emailAddress + '&previous=' + currentPage;
            }
        }
    });

    function validateEmail($email) {
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        return emailReg.test( $email );
    }

    function checkErrors() {
        if(searchParams.get('invalid')) {
            let param = searchParams.get('true');
            $('.js-error-box').removeClass('u-d-no');
            $('.js-inpagelink').html('Enter an email address in a valid format, for example, name@example.com');
            $('#email-field').wrap( '<div class="panel panel--simple panel--error"><div class="panel__body"></div></div>' );
            $('#email-field').before('<p id="panel-error" class="panel__error u-fs-r--b">Enter an email address in a valid format, for example, name@example.com</p>');
        } else if (searchParams.get('empty')) {
            let param = searchParams.get('true');
            $('.js-error-box').removeClass('u-d-no');
            $('.js-inpagelink').html('Enter an email address');
            $('#email-field').wrap( '<div class="panel panel--simple panel--error"><div class="panel__body"></div></div>' );
            $('#email-field').before('<p id="panel-error" class="panel__error u-fs-r--b">Enter an email address</p>');
        }
    }

    pipingDestinations.forEach(function(pipingDestination) {
        pipingDestination.innerHTML = pipingDestination.innerHTML.replace('{x}', emailAddress);
    });

    $('.exit').on('click', function (e) {
        e.preventDefault();
        window.location.href = '../home/';
        sessionStorage.clear();
    });

    function updateAllLinks() {
        if (previousPage === 'complete') {
            $('.js-previous-link').attr('href', '../' + previousPage);
        } else if (previousPage === 'complete--confirmation-sent') {
            $('.js-previous-link').attr('href', '../' + previousPage + '?' + 'previous=' + currentPage);
        } else if (previousPage === null) {
            $('.js-previous-link').attr('href', '../' + 'complete');
        }
    }

    $(updateAllLinks);
    $(checkErrors);
</script>
