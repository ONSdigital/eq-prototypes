---
title: Household prototype v15
project: your-household
globalcss: false
layout: eq-default-extras
assetPrefixUrl: https://sdc-global-design-patterns.netlify.com
---

<link rel="stylesheet" href="../style.css"/>
<div class="page__subheader">
    <div class="container">
        <a class="js-previous-link"
           href="../does-anyone-else-live-here">Previous</a>
    </div>
</div>

<div class="page__container container">
    <div class="grid grid--reverse">
        <div class="grid__col col-4@l"></div>
        <div class="grid__col col-7@l pull-1@l">
            <main role="main" id="main" class="page__main">
                <form name="trav" class="form qa-questionnaire-form" role="form"
                      autocomplete="off" novalidate="">
                    <input type="hidden" name="away-journeys"
                           value=""/>
                    <div class="group">
                        <div class="block">
                            <section class="section">
                                <div class="question u-mb-s"
                                     id="total-retail-turnover-question">
                                    <h1 class="question__title u-fs-l js-heading">
                                        <span class="js-heading-inner-part1"></span>
                                    </h1>
                                </div>

                                <ul data-redirect="../people-count-confirmation/"
                                    class="list list--records list--people u-mb-s js-records js-household-members-summary"></ul>

                                <div class="panel panel--simple panel--info u-mb-s">
                                    <div class="panel__body">
                                        <strong class="u-mb-xs u-d-b">Remember to include people who are temporarily away
                                        </strong>
                                        <ul>
                                            <li>People who work away from home within the UK if this is their permanent or family home</li>
                                            <li>Members of the armed forces if this is their permanent or family home</li>
                                            <li>People who are temporarily outside the UK for less than <strong>12 months</strong></li>
                                            <li>People staying, or expecting to stay, in an establishment such as a hospital, care home or hostel for less than 6 months</li>
                                            <li>Other people who usually live here but are temporarily away</li>
                                        </ul>
                                        <strong class="u-mb-xs u-mt-m u-d-b">Remember to include people who are temporarily staying
                                        </strong>
                                        <ul>
                                            <li>People staying temporarily who usually live in the UK but do not have another UK address for example, relatives, friends</li>
                                            <li>People who usually live outside the UK who are staying in the UK for <strong>3 months or more</strong></li>
                                        </ul>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <div class="answer__fields js-fields u-mt-m">
                        <div class="field field--radio field--multiplechoice">
                            <fieldset class="u-mb-m">
                                <div class="field__item js-focusable-box">
                                    <input class="input input--radio js-focusable"
                                           type="radio"
                                           name="away-type"
                                           id="yes">
                                    <label class="label label--inline"
                                           for="yes">
                                        Yes, I need to add someone
                                    </label>
                                </div>

                                <div class="field__item js-focusable-box">
                                    <input class="input input--radio js-focusable"
                                           type="radio"
                                           name="away-type"
                                           id="no">
                                    <label class="js-number-of-people-answer label label--inline"
                                           for="no">
                                        No, 
                                    </label>
                                </div>
                            </fieldset>
                        </div>
                    </div>

                    <div
                            class="collapsible collapsible--simple js-collapsible js-collapsible-simple u-mb-l">
                        <div class="js-collapsible-content">
                            <h3 class="collapsible__title js-collapsible-title icon--collapsible-simple u-fs-r--b" data-ga="click" data-ga-category="definition" data-ga-action="Open panel" data-ga-label="Why we ask this question">Why we ask this question</h3>
                            <div class="collapsible__body js-collapsible-body">
                                <p>We ask this question to help ensure that everyone is correctly counted in the census. The information is vital for planning services, whether it's for hospital beds, school places, GP's and dentist's services or where to build houses and roads.</p>
                                <button class="btn btn--secondary btn--small js-collapsible-close u-no-js-hide" data-ga="click" data-ga-category="definition" data-ga-action="Close panel" data-ga-label="Why we ask this question">Hide this</button>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn--primary btn--lg qa-btn-submit"
                            type="submit" name="">Save and continue
                    </button>
                </form>
            </main>
        </div>
    </div>
</div>

<script src='/js/compiled/your-household-v15/bundle.js'></script>

<ul style="display:none;">
    <li id="question-list-item-template"
        class="list__item js-list-item-label"></li>
</ul>

<script>
  var storageAPI = window.ONS.storage,
    urlParams = new URLSearchParams(window.location.search),
    members = storageAPI.getAllHouseholdMembers().filter(storageAPI.isHouseholdMember),
    yesbox = document.getElementById("yes"),
    grouped = {
      away: [
        storageAPI.tempAwayQuestionSentenceMap['perm-away'],
        storageAPI.tempAwayQuestionSentenceMap['armed-forces'],
        storageAPI.tempAwayQuestionSentenceMap['less-twelve'],
        storageAPI.tempAwayQuestionSentenceMap['other']
      ],
      in: [
        storageAPI.tempAwayQuestionSentenceMap['usually-temp'],
        storageAPI.tempAwayQuestionSentenceMap['three-more'],
      ]
    };

  $('.qa-btn-submit').on('click', function(e) {
    e.preventDefault();

    window.location = yesbox.checked
      ? '../adding-another-person/'
      : '../visitors/';
  });

  function createIncludeItem(text) {
    var $nodeEl = $('#question-list-item-template').clone(),
      $label = $nodeEl;

    $nodeEl.attr('id', '');
    $label.html(text);

    return $nodeEl;
  }

  function getNumberInHousehold() {
    var members = storageAPI.getAllHouseholdMembers()
    var householdMembers = members.filter(storageAPI.isHouseholdMember)

    return householdMembers;
  };

  function updateQuestionList() {
    $('#question-list-away').html(grouped.away.map(createIncludeItem));
    $('#question-list-in').html(grouped.in.map(createIncludeItem));
  }

  function personWording(numberOfPeople, type) {
    if (window.ONS.utils.numberToWordsStyleguide(numberOfPeople)) {
      var numberOfPeople = getNumberInHousehold().length
      var questionPersonWordingText = '<em class="highlight">' + numberOfPeople + "</em> people live"
      var answerPersonWordingText = window.ONS.utils.numberToWordsStyleguide(numberOfPeople) + " people live"
      if (numberOfPeople == 1) {
        questionPersonWordingText = '<em class="highlight">one</em> person lives'
        answerPersonWordingText = "one person lives"
      } 
    } else {
        questionPersonWordingText = "<mark>no</mark> people live"
        answerPersonWordingText = "no people live"
    }
    if (type == "question") {
      return questionPersonWordingText
    } else {
      return answerPersonWordingText
    }
  }

  function updateQuestion () {
    var numberOfPeople = getNumberInHousehold().length
    $('.js-heading-inner-part1').html(
      'You said ' + personWording(numberOfPeople, "question") +' at ' + sessionStorage.getItem('address') + '. Do you need to add anyone?'
    );
  }

  function updateAnswer(householdMembers) {
    var numberOfPeople = getNumberInHousehold().length
    if (numberOfPeople == 1) {
      $('.js-number-of-people-answer').html(
        'No, there is one person living here'
      );
    } else {
      $('.js-number-of-people-answer').html(
        'No, there are ' + numberOfPeople + ' people living here'
      );
    }
  }
  function updateAllPreviousLinks() {
    $('.js-previous-link').attr('href', document.referrer);
  }

  $(updateAllPreviousLinks);

  $(updateQuestionList);
  $(updateQuestion);
  $(updateAnswer);
  
</script>
