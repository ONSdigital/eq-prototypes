---
title: Totals v1 (replay inputs)
project: Totals
globalcss: false

---

<header class="page__header">
{% include survey-header.html %}
{% include bar.html %}
</header>
<style>
.hidden {display: none;}
</style>
<div class="page__subheader">
  <div class="container">
    <a class="mars" href="../section-5">Previous</a>
  </div>
</div>

<div class="page__container container">
  <div class="grid grid--reverse">
    <div class="grid__col col-4@m">
    </div>
    <div class="grid__col col-7@m pull-1@m">
      <main role="main" id="main" class="page__main">
        <!-- Error head start -->
            <div class="panel panel--error u-mb-s hidden" data-qa="error">
              <div class="panel__header">
                <h1 class="panel__title venus">This page has 1 error</h1>
              </div>
              <div class="panel__body" data-qa="error-body">
                <p class="mars">These <strong>must be corrected</strong> to continue.</p>
                <ul class="list list--bare">

                    <li class="list__item mars">
                      1) <a class="js-inpagelink" id="errorLink" href="#q4r1">Please amend this answer to continue.</a>
                    </li>

                  </ul>
                </div>
              </div>
        <!-- End error head -->
        <form action="../thankyou" class="form qa-questionnaire-form" role="form" autocomplete="off" novalidate="">
          <div class="group" id="rsi">
            <div class="block" id="total-retail-turnover">
              <section class="section" id="total-retail-turnover-section">
                <h2 class="section__title neptune">
                  Commodities Retail Turnover
                </h2>
                <div class="section__description mars"><p>1 April 2016 to 31 March 2017</p></div>
                <div class="question" id="total-retail-turnover-question">
                  <h1 class="question__title saturn">
                    From your previous answers the total retail turnover for <span class="config1">Apple</span> has been calculated as: <span class="highlight"><span class="retailTotal"></span></span>
                  </h1>
                  <div class="question__description mars" id="description-total-retail-turnover-question">
                    <p>Please review your answers used to calculate this total and amend as necessary.</p>
                  </div>
<!-- Summary playback -->
  <div class="summary">
    <h2 class="summary__title saturn" id="reporting-period-section">Retail turnover elements</h2>
    <div class="summary__block">
      <div class="summary__items">
        <div class="summary__question" id="reporting-period-question">
          Food
        </div>
        <div class="summary__answer">
          <div class="summary__answer-text" id="q3r1-answer"></div>
          <div class="summary__edit">
            <a href="../section-1" class="summary__edit-link" aria-describedby="period-from period-from-answer" data-qa="period-from-edit">Edit<span class="u-vh"> your answer</span></a>
          </div>
        </div>
        <div class="summary__question" id="reporting-period-question">
          Alcohol, confectionery and tobacco
        </div>
        <div class="summary__answer">
          <div class="summary__answer-text" id="q3r2-answer" data-qa="period-from-answer"></div>
          <div class="summary__edit">
            <a href="../section-2" class="summary__edit-link" aria-describedby="period-from period-from-answer" data-qa="period-from-edit">Edit<span class="u-vh"> your answer</span></a>
          </div>
        </div>
        <div class="summary__question" id="reporting-period-question">
          Clothing and footwear
        </div>
        <div class="summary__answer">
          <div class="summary__answer-text" id="q3r3-answer" data-qa="period-from-answer"></div>
          <div class="summary__edit">
            <a href="../section-3" class="summary__edit-link" aria-describedby="period-from period-from-answer" data-qa="period-from-edit">Edit<span class="u-vh"> your answer</span></a>
          </div>
        </div>
        <div class="summary__question" id="reporting-period-question">
          Household goods
        </div>
        <div class="summary__answer">
          <div class="summary__answer-text" id="q3r4-answer" data-qa="period-from-answer"></div>
          <div class="summary__edit">
            <a href="../section-4" class="summary__edit-link" aria-describedby="period-from period-from-answer" data-qa="period-from-edit">Edit<span class="u-vh"> your answer</span></a>
          </div>
        </div>
        <div class="summary__question" id="reporting-period-question">
          Other goods
        </div>
        <div class="summary__answer">
          <div class="summary__answer-text" id="q3r5-answer" data-qa="period-from-answer"></div>
          <div class="summary__edit">
            <a href="../section-5" class="summary__edit-link" aria-describedby="period-from period-from-answer" data-qa="period-from-edit">Edit<span class="u-vh"> your answer</span></a>
          </div>
        </div>
      </div>
    </div>

  </div>
                </div>
              </section>
<!-- checkbox to confirm review of the total -->
        <div class="summary">
          <h2 class="summary__title saturn" id="reporting-period-section">Calculated total retail turnover</h2>
          <div class="summary__block">
            <div class="summary__items">
              <div class="summary__question" id="reporting-period-question">
                Calculated total
              </div>
              <div class="summary__answer">
                <div class="summary__answer-text" id="q3r0-answer" data-qa="period-from-answer">
                  <span class="retailTotal neptune"></span>
                  <p class="mars" style="word-break:break-word">If this calculated total <strong>does not match</strong> the total retail turnover you hold on file please review your <a href="#reporting-period-section">previous answers</a> to ensure the values are correct.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="question" id="total-retail-turnover-question-check">
          <h1 class="question__title saturn">
            Does the calculated total match your records?
          </h1>
          <!--<div class="question__description mars" id="description-total-retail-turnover-question">
            <p>The total (<span class="retailTotal"></span>) should be the same as your total retail turnover. If it does not match please review your answers to ensure all previously entered values are correct.</p>
          </div>-->
          <div class="answer__fields">
            <div class="field field--checkbox field--multiplechoice">
              <div class="field__item js-focusable-box">
                <input class="input input--checkbox js-focusable" type="checkbox" id="answer-checked">
                <label class="label label--inline venus" for="answer-checked">Yes, this total matches my records</label>
              </div>
            </div>
            <div class="" style="margin-top: 1rem;">
                <p class="mars"><a href="#reporting-period-section">No, review your answers for retail turnover elements</a></p>
            </div>
          </div>
        </div>
<!-- / checkbox to confirm review of the total -->
<!-- Of which question -->
<div class="question" id="internet-sales-question">
  <h2 class="question__title saturn">
    Of your total retail turnover, <span class="highlight"><span class="retailTotal"></span></span>, how much was from <span class="highlight">internet sales</span>?
  </h2>
  <div class="question__description mars" id="description-total-retail-turnover-question">
    <p>Round your figures to the nearest whole pound (£). Even if your figures are zero, please still complete.</p>
  </div>
  <div class="question__answers">
    <div class="question__answer">
      <div class="answer answer--currency" id="total-retail-turnover-answer">
        <div class="answer__fields js-fields">
          <div class="field">
            <label for="q4r1" id="label-total-retail-turnover-answer" class="label venus ">
              <div class="label__inner">
                Internet sales total
              </div>
            </label>
            <div class="input-type input-type--currency">
              <span class="input-type__type" id="total-retail-turnover-answer-type">£</span>
              <input id="q4r1" value="" data-qa="input-text" name="q4r1" class="input input--text input-type__input">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- / Of which question -->

            </div>
          </div>
          <button class="btn btn--primary btn--lg qa-btn-submit venus" type="submit" name="">Save and continue</button>
          <div class="u-mb-m">
            <button class="btn btn--link mars js-btn-save" type="submit" name="action[save_sign_out]">Save and complete later</button>
          </div>
        </form>
        <a class="page__previous page__previous--bottom js-previous-link" href="../section-5" id="bottom-previous">Previous</a>
      </main>
    </div>
  </div>
</div>
<script>
$( document ).ready(function() {
  var editing = true;
  sessionStorage.setItem('editing', editing);
  if ($('.config1').length>0){
    var config1 = sessionStorage.getItem('config1');
    $('.config1').html(config1);
  }

  if ($('.retailTotal').length > 0) {
    var retailTotal = (Number(sessionStorage.getItem('q3r6'))+Number(sessionStorage.getItem('q3r5'))+Number(sessionStorage.getItem('q3r4'))+Number(sessionStorage.getItem('q3r3'))+Number(sessionStorage.getItem('q3r2'))+Number(sessionStorage.getItem('q3r1'))).toLocaleString('en-gb',{ style: 'currency', currency: 'GBP', minimumFractionDigits: '2' });
    var q3r1_answer = (Number(sessionStorage.getItem('q3r1'))).toLocaleString('en-gb',{ style: 'currency', currency: 'GBP', minimumFractionDigits: '2' });
    var q3r2_answer = (Number(sessionStorage.getItem('q3r2'))).toLocaleString('en-gb',{ style: 'currency', currency: 'GBP', minimumFractionDigits: '2' });
    var q3r3_answer = (Number(sessionStorage.getItem('q3r3'))).toLocaleString('en-gb',{ style: 'currency', currency: 'GBP', minimumFractionDigits: '2' });
    var q3r4_answer = (Number(sessionStorage.getItem('q3r4'))).toLocaleString('en-gb',{ style: 'currency', currency: 'GBP', minimumFractionDigits: '2' });
    var q3r5_answer = (Number(sessionStorage.getItem('q3r5'))).toLocaleString('en-gb',{ style: 'currency', currency: 'GBP', minimumFractionDigits: '2' });
    var q3r6_answer = (Number(sessionStorage.getItem('q3r6'))).toLocaleString('en-gb',{ style: 'currency', currency: 'GBP', minimumFractionDigits: '2' });

    if(q3r1_answer=='£0.00') {
      q3r1_answer = q3r1_answer+' (Nil return)';
    }
    if(q3r2_answer=='£0.00') {
      q3r2_answer = q3r2_answer+' (Nil return)';
    }
    if(q3r3_answer=='£0.00') {
      q3r3_answer = q3r3_answer+' (Nil return)';
    }
    if(q3r4_answer=='£0.00') {
      q3r4_answer = q3r4_answer+' (Nil return)';
    }
    if(q3r5_answer=='£0.00') {
      q3r5_answer = q3r5_answer+' (Nil return)';
    }
    if(q3r6_answer=='£0.00') {
      q3r6_answer = q3r6_answer+' (Nil return)';
    }
    console.info('Calc\'d total:'+retailTotal);
    $('#q3r1-answer').text(q3r1_answer);
    $('#q3r2-answer').text(q3r2_answer);
    $('#q3r3-answer').text(q3r3_answer);
    $('#q3r4-answer').text(q3r4_answer);
    $('#q3r5-answer').text(q3r5_answer);
    $('#q3r6-answer').text(q3r6_answer);
    $('.retailTotal').text(retailTotal);

    // Of which (internet sales)
    var q4r1_answer = (sessionStorage.getItem('q4r1'));

    if(q4r1_answer!==""){
      $('#q4r1').val(q4r1_answer);
    }
    // / Of which

// console.log(retailTotal.toLocaleString('en-gb',{ style: 'currency', currency: 'GBP' }));

    sessionStorage.setItem('retailTotal', retailTotal);

  }
  console.info(sessionStorage);
  // $('.qa-btn-get-started').click(function(e) {
  $('.qa-btn-submit').click(function(e) {
    var inputValue = $("input[name='q4r1']").val();
    sessionStorage.setItem('q4r1', inputValue);

    var errorPrep = '<div class="panel__header"><ul class="list list--bare list--errors"><li class="list__item mars" data-ga-action="Please confirm that your answers match" data-ga-label="single-date-question" data-ga="error" data-ga-category="Error"><p>Please confirm that you have checked that the calculated total and the total you <strong>hold on file</strong> match to continue.</p></li></ul></div>';
    var inputValue = $("input[id='answer-checked']:checked").val();;

    if(inputValue!=='on'){

      $(".panel--error").toggleClass("hidden");
      $('#errorLink').attr('href','#total-retail-turnover-question-check');
      $('#total-retail-turnover-question-check .answer__fields').wrap('<div class="panel__body" data-qa="error-body">').prepend(errorPrep);
      $('#total-retail-turnover-question-check').wrap('<div class="answer answer--date js-has-errors" id="errorq2r1"><aside class="panel panel--simple panel--error" data-qa="error">');
      $(window).scrollTop(0); // faux submission behaviour - top of page.
      e.preventDefault();
    } else {
      //alert('checked');
      window.location.href = "../feedback/"; // target of save and continue
    }

e.preventDefault();
  });

});
</script>
