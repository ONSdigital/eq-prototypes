<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Validation patterns</title>
  <meta name="description" content="                                            BETA    Validation patterns        Previous  ">

  

  <link rel="stylesheet" href="/eq-prototypes/css/main.css">
  <link rel="stylesheet" href="/eq-prototypes/css/responsive.css">
  <link rel="canonical" href="http://onsdigital.github.io/eq-prototypes/validation/index/">
  <link rel="alternate" type="application/rss+xml" title="eQ Prototypes" href="http://onsdigital.github.io/eq-prototypes/feed.xml">
  <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Lato:300,400,600,700,900'>
  <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css'>
  <script src="/eq-prototypes/js/jquery.min.js"></script>
  <script type="text/javascript">
    document.addEventListener("touchstart", function(){}, true);
  </script>
</head>

  <body>
    <div class="page">
      <div class="page__content">
        <div class="skip">
          <a class="skip__link" href="#main">Skip to content</a>
        </div>
        <header class="page__header">
  <div class="container">
    <div class="header">
      <div class="logo header__logo">
        <img src="/eq-prototypes/s/img/logo.svg?q=b9a5e2a769014f162729655ec44ee5c5210bc8c3" alt="Office for National Statistics" class="logo__img" />
      </div>
      <!-- <div class="info header__info" role="contentinfo">
        <h3 class="info__title venus" id="survey-help">Survey Help</h3>
        <div class="info__tel">
          <a class="info__link" href="tel:03001234931" aria-describedby="survey-help">0300 1234 931</a>
        </div>
        <dl class="info__list">
          <dt class="info__dt first"><abbr title="Survey identification code">ID:</abbr></dt>
          <dd class="info__dd">023</dd>
          <dt class="info__dt">Period:</dt>
          <dd class="info__dd">May 2016</dd>
          <dt class="info__dt"><abbr title="Reference number">Ref:</abbr></dt>
          <dd class="info__dd last">12346789012A</dd>
        </dl>
      </div> -->
    </div>
  </div>

<div class="bar " role="banner">
  <div class="bar__inner container">
    <div class="badge badge--amber u-mr-xs">BETA</div>
    <div class="bar__title venus">Validation patterns</div>
  </div>
</div>

</header>
<style>
.has-error {
  color: #D0121E;
  font-weight: 700;
  transition: all 0.3s ease-in-out;
  display: inline-block;
  /*border-left: 3px solid #d0121e;*/
  /*padding-left: 0.5rem;*/
}
.input--has-error {
  background-color: #fff;
  border-color: #d0121e;
  box-shadow: 0 0 0 1px #d0121e;
  font-weight: 700;
  color: #d0121e;
}
.input--has-error:focus,
.input--has-error:hover {
  border-color: #d0121e;
  outline-color: #d0121e;
  box-shadow: 0 0 0 1px #d0121e;
}
.input--has-error-old {
  background-color: #fbecec;
  transition: background-color 1s ease-in-out;
}
.input-validation {
  /*display: none;*/
  margin-top: 0.5rem
}
</style>
<div class="page__subheader">
  <div class="container">
    <a class="mars" href="../index">Previous</a>
  </div>
</div>

<div class="page__container container">
  <div class="grid grid--reverse">
    <div class="grid__col col-4@m">
    </div>
    <div class="grid__col col-7@m pull-1@m">
      <main role="main" id="main" class="page__main">
        <form action="../thankyou" class="form qa-questionnaire-form" role="form" autocomplete="off" novalidate="">
          <div class="group" id="rsi">
            <div class="block" id="total-retail-turnover">
              <section class="section" id="total-retail-turnover-section">
                <h2 class="section__title neptune">Inline validation pattern</h2>
                <div class="section__description mars">
                  <p>July 2017</p>
                  <p>To trigger an error enter a value including pence</p>
                </div>
                <div class="question" id="total-retail-turnover-question">
                  <h1 class="question__title saturn">
                    What was the value of the business&rsquo;s total sales of <span class="highlight">food</span>?
                  </h1>
                  <div class="question__answers">
                    <div class="question__answer">
                      <div class="answer answer--currency" id="total-retail-turnover-answer">
                        <div class="answer__fields js-fields">
                          <div class="field">
                            <label for="q3r1" id="label-total-retail-turnover-answer" class="label venus ">
                              <div class="label__inner">
                                Total value of food sales
                              </div>
                              <div class="question__description mars" id="q3r1_description">Round to the nearest pound. Do not include pence.</div>
                            </label>
                            <div class="input-type input-type--currency">
                              <abbr title="Pounds sterling" class="input-type__type" id="q3r2type">£</abbr>
                              <input id="q3r1" value="" name="q3r1" class="input input--text input-type__input">
                            </div>
                            <!-- Validation message -->
                            <div class="input-validation has-error u-vh" role="alert" aria-live="assertive"></div>
                            <!-- / Validation message -->
                          </div>
                        </div>
                      </div>
                      <div class="guidance js-details" data-show-label="Show further guidance" data-hide-label="Hide further guidance">
                        <a class="guidance__link js-details-trigger js-details-label mars" href="#guidance-permanent-or-family-home-answer" aria-expanded="false" data-guidance-trigger="true" aria-controls="guidance-permanent-or-family-home-answer-body" id="guidance-permanent-or-family-home-answer-trigger" data-ga-category="Help" data-ga-label="permanent-or-family-home-answer" data-ga="click" data-ga-action="Guidance click">Show further guidance</a>
                          <div class="guidance__main js-details-body" id="guidance-permanent-or-family-home-answer-body" aria-hidden="true">
                            <div class="guidance__content mars">
                            <h3 class="venus">Include</h3>
                            <ul class="mars">
                              <li>all fresh food</li>
                              <li>other food for human consumption (except chocolate and sugar confectionery)</li>
                              <li>soft drinks</li>
                            </ul>
                            <h3 class="venus">Exclude</h3>
                            <ul class="mars">
                              <li>sales from catering facilities used by customers</li>
                              <li>National lottery</li>
                            </ul>
                          </div>
                        </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
            <div class="question" id="total-retail-turnover-question" style="margin-top:1.5rem;">
              <h1 class="question__title saturn">
                What was the value of the business&rsquo;s total sales of <span class="highlight">alcohol</span>?
              </h1>
              <div class="question__answers">
                <div class="question__answer">
                  <div class="answer answer--currency" id="total-retail-turnover-answer">
                    <div class="answer__fields js-fields">
                      <div class="field">
                        <label for="q3r2" id="label-total-retail-turnover-answer" class="label venus ">
                          <div class="label__inner">
                            Total value of alcohol sales
                          </div>
                          <div class="question__description mars" id="q3r1_description">Round to the nearest pound. Do not include pence.</div>
                        </label>
                        <div class="input-type input-type--currency">
                          <abbr title="Pounds sterling" class="input-type__type" id="q3r2type">£</abbr>
                          <input id="q3r2" value="" data-qa="input-text" name="q3r2" class="input input--text input-type__input">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="guidance js-details" data-show-label="Show further guidance" data-hide-label="Hide further guidance">
                    <a class="guidance__link js-details-trigger js-details-label mars" href="#guidance-permanent-or-family-home-answer" aria-expanded="false" data-guidance-trigger="true" aria-controls="guidance-permanent-or-family-home-answer-body" id="guidance-permanent-or-family-home-answer-trigger" data-ga-category="Help" data-ga-label="permanent-or-family-home-answer" data-ga="click" data-ga-action="Guidance click">Show further guidance</a>
                      <div class="guidance__main js-details-body" id="guidance-permanent-or-family-home-answer-body" aria-hidden="true">
                        <div class="guidance__content mars">
                        <h3 class="venus">Include</h3>
                        <ul class="mars">
                          <li>all fresh food</li>
                          <li>other food for human consumption (except chocolate and sugar confectionery)</li>
                          <li>soft drinks</li>
                        </ul>
                        <h3 class="venus">Exclude</h3>
                        <ul class="mars">
                          <li>sales from catering facilities used by customers</li>
                          <li>National lottery</li>
                        </ul>
                      </div>
                    </div>
                </div>
              </div>
            </div>
          </section>
        </div>
          </div>
          <button class="btn btn--primary btn--lg qa-btn-submit venus" type="submit" name="">Save and continue</button>
          <div class="u-mb-m">
            <button class="btn btn--link mars js-btn-save" type="submit" name="action[save_sign_out]">Save and complete later</button>
          </div>
        </form>
        <a class="page__previous page__previous--bottom js-previous-link" href="../index" id="bottom-previous">Previous</a>
      </main>
    </div>
  </div>
</div>
<script>
$( document ).ready(function() {
  $('#q3r1').keyup(function(){
    validate();
  });
  $('#q3r2').keyup(function(){
    validate2()
  });
var errortype = '';

  function validate(){
    var str = $('#q3r1').val();
      if(str.search(/\D/i)>=0){ // Check for any non digit
        errortype="Enter a valid number";
        if(str.search(/\w/i)>=0){ // Check for any word character
          errortype="Use numbers only (1-0)"
          if(str.indexOf('.')>= 0){ // Check for decimal place
            errortype="Enter whole pounds only. Do not enter pence.";
          }
        }
        doError();
      } else {
        removeError();
      }
  }
  function doError(){
    var elem = $('#q3r1');
    var className = "input--has-error";
    if(!elem.hasClass(className)){
        $('.input-validation').html('Error:&nbsp;'+errortype).removeClass('u-vh');
      }
    $('#q3r1').addClass('input--has-error');
  }

  function removeError(){
    $('.input-validation').addClass('u-vh').text('');
    $('#q3r1').removeClass('input--has-error');
  }

  function validate2(){
    var str = $('#q3r2').val();
    if(str.indexOf('.')>= 0){
      $('#q3r2').addClass('input--has-error-old');
    } else {
      $('#q3r2').removeClass('input--has-error-old');
    }
  }


  if ($('.q1').length > 0) {
    var q1var = sessionStorage.getItem('q1r1');
    $('.q1').text(q1var);
  }
  if ($('.config1').length>0){
    var config1 = sessionStorage.getItem('config1');
    $('.config1').html(config1);
  }

  var q3r1_answer = sessionStorage.getItem('q3r1');

  if(q3r1_answer!==""){
    $('#q3r1').val(q3r1_answer);
  }

  //console.info(sessionStorage);

  $('.qa-btn-submit').click(function(e) {
    e.preventDefault();

    var editing = sessionStorage.getItem('editing');
    if(editing=='true'){
      window.location.href="../playback/";
    } else {
      window.location.href = "../section-2/"; // target of save and continue
    }

        if ("text" === "text") {
          var inputValue = $("input[name='q3r1']").val();
          sessionStorage.setItem('q3r1', inputValue);

        } else {
          var inputValue = $("input[name='q3r1']:checked").val();
          sessionStorage.setItem('q3r1', inputValue);
        }
  });

  $('.js-details-trigger').click(function(e) {
    var text = $(this).text();
    if ($('.js-details').hasClass('is-expanded')){
      $(this).text(text.replace('Hide', 'Show'));
    } else {
      $(this).text(text.replace('Show', 'Hide'));
    }
    e.preventDefault();
    $('.js-details').toggleClass('is-expanded');

  });

});
</script>

      </div>
      <footer class="page__footer">
  <div class="footer page__footer" role="contentinfo">
    <div class="container">
      <div class="pluto">© <a class="footer__link" href="https://www.ons.gov.uk/" target="_blank">Office for National Statistics 2016</a></div>
    </div>
  </div>
</footer>

    </div>
    <!-- Uncomment for Loop 11 <script type="text/javascript">
      var loop11_key = "0104054b3b56d396b42e668dfe096cee161454a8";
      var l11_clientOptions = {"cookieDomain":".github.io"};
      document.write(unescape("%3cscript src='//cdn.loop11.com/my/loop11.js' type='text/javascript'%3e%3c/script%3e"));
    </script> -->
  </body>
</html>
