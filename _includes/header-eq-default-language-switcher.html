<style>
    .language-switcher {
        position: relative;
        top: -.25rem;
    }

    .languages {
        position: absolute;
        right: 0;
        border: 1px solid #999;
        background-color: #fff;
        border-radius: 3px;
    }

    .language-switcher__selected,
    .language-switcher__link {
        display : block;
        padding : .2rem .5rem;
    }

    .language-switcher__items {
        display : none;
        margin-bottom : 0;
        padding : 0;
        list-style-type : none;
    }

    .language-switcher__item {
        margin-bottom : 0;
    }

    .language-switcher__item {
        border-top : 1px solid #999;
    }

    .language-switcher__selected {
        width : 8rem;
        line-height : 1.6rem;
        text-align : left;
        background: none;
        border: none;
    }

    .language-switcher__selected::after {
        position: absolute;
        right: 10px;
        height: 20px;
        width: 20px;
        content: "";
        background-image: url('https://sdc-global-design-patterns.netlify.com/assets/img/icons/icons--chevron-right-blue-hover.svg');
        background-repeat: no-repeat;
        background-size: 10px;
        background-position: 92% center;
        transform: rotate(90deg);
    }

    .language-switcher__selected--open {

    }

    .language-switcher__items--open {
        display: block;
    }


    /*.languages:focus-within > .language-switcher__items {
        display : block;
    }*/
</style>

<header class="header">
    <div class="header__top" role="banner">
        <div class="container">
            <div class="grid grid--gutterless">
                <div class="grid__col col-6@s">
                    <div class="logo">
                        <img src="https://deploy-preview-129--sdc-global-design-patterns.netlify.com/assets/img/ons-logo-black-en.svg" alt="Office for National Statistics logo" class="logo__img header__logo--print">
                        <a href="{{ site.baseurl }}/">
                            <img src="https://deploy-preview-129--sdc-global-design-patterns.netlify.com/assets/img/ons-logo-pos.svg" alt="Office for National Statistics logo" class="logo__img header__logo print__hidden">
                        </a>
                    </div>
                </div>
                <div class="grid__col col-6@s">
                    <div class="language-switcher js-language-switcher">
                        <div class="languages">
                            <button
                                    class="language-switcher__selected js-language-switcher-selected">
                                English
                            </button>
                            <ul class="language-switcher__items js-language-switcher-items">
                                <li class="language-switcher__item">
                                    <a class="language-switcher__link js-language-switcher-item" href="">
                                        Cymraeg
                                    </a>
                                </li>
                                <li class="language-switcher__item">
                                    <a class="language-switcher__link js-language-switcher-item" href="">
                                        Gàidhlig
                                    </a>
                                </li>
                                <li class="language-switcher__item">
                                    <a class="language-switcher__link js-language-switcher-item" href="">
                                        Ulstèr-Scotch
                                    </a>
                                </li>
                                <li class="language-switcher__item">
                                    <a class="language-switcher__link js-language-switcher-item"
                                       href="../all-languages/">
                                        All languages
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="header__main ">
        <div class="container">
            <div class="grid grid--gutterless grid--align-mid u-cf">
                <div class="grid__col ">
                    <h1 class="header__title header__title--nav-adj">
                        <span class="js-header-title">
                            {% if page.title %}
                                {{ page.title }}
                            {% else %}
                                {{ site.title }}
                            {% endif %}
                        </span>
                        <button class="btn btn--ghost u-fr">Save and
                            complete later</button>
                    </h1>
                </div>
            </div>
        </div>
    </div>
</header>


<script>
    $(function () {
      var $scopeEl = $('.js-language-switcher');
      var $switcher = $scopeEl.find('.js-language-switcher-selected');
      var clickedStateProperty = 'data-language-item-clicked';
      var switcherOpenClass = 'language-switcher__selected--open';
      var itemsOpenClass = 'language-switcher__items--open';

      $switcher.on('mouseup', function(e) {
        e.preventDefault();
        e.stopPropagation();

        toggle($switcher.hasClass(switcherOpenClass)
          ? 'hide'
          : 'show');
      });

      function setSwitcherProp(val) {
        $switcher.attr(clickedStateProperty, val);
      }

      $scopeEl.find('.js-language-switcher-item')
        .on('mousedown', setSwitcherProp.bind(null, true));

      document.addEventListener('mouseup', function  () {
        toggle('hide');
      });

      $switcher.on('blur', function () {
        if($switcher.attr(clickedStateProperty) !== 'true') {
          toggle('hide');
        }
      });

      function toggle(description) {
        var jQMethod = description === 'show' ? 'addClass' : 'removeClass';

        $switcher[jQMethod](switcherOpenClass);
        $scopeEl.find('.js-language-switcher-items')[jQMethod](itemsOpenClass);
      }
    });
</script>
